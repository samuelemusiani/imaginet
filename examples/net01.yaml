# This example show routing between two namespaces using another as a router
# Tree namespaces are created. Two cables from the namespaces
# to the third are created.

# To be able to make routing work you probably need to enable ip forwarding
# on the "router" namespace. This can be done with the following command:
#
# /usr/sbin/sysctl -w net.ipv4.ip_forward=1
#
# This example show routing between two namespaces using another as a router
# You should not need to run the command as root because inside the 
# namespace you have all the needed capabilities

namespace:
  - name: ns1
    interfaces: 
      - name: eth0
        ip: 10.0.0.1/24
        gateway: 10.0.0.254

  - name: ns2
    interfaces:
      - name: eth0
        ip: 192.168.1.1/24
        gateway: 192.168.1.254

  - name: router
    interfaces:
      - name: eth0
        ip: 10.0.0.254/24

      - name: eth1
        ip: 192.168.1.254/24

# Cables are like real ethernet cables
cable:
    # Every cable have a name that must be unique
  - name: conn1
    endpoint_a:
      name: ns1
      port: eth0
    endpoint_b:
      name: router
      port: eth0

  - name: conn2
    endpoint_a:
      name: ns2
      port: eth0
    endpoint_b:
      name: router
      port: eth1
